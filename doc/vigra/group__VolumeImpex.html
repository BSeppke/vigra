<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><TITLE>vigra - Import/export of volume data.</TITLE>
<link rel=stylesheet type="text/css" href="vigra.css">
<link rel=stylesheet type="text/css" href="vigra_1_8_2.css">
<link rel="shortcut icon" href="vigra-icon.ico" />
<script type="text/javascript">
function toggleHiddenDocumentation( textID, toggleID, toggleMessage )
{ 
	if( document.getElementById(textID).style.display == 'none' )
    {
		document.getElementById(textID).style.display = 'block';
        document.getElementById(toggleID).innerHTML = "hide " + toggleMessage;
    }
    else
    {
		document.getElementById(textID).style.display = 'none';
        document.getElementById(toggleID).innerHTML = "show " + toggleMessage;
	}
    return false;
}
</script>
</head>
<body  bgcolor="#f8f0e0" link="#0040b0" vlink="#a00040">
<basefont face="Helvetica,Arial,sans-serif" size=3>
<p align=right>
[ <a href="http://hci.iwr.uni-heidelberg.de/vigra/">VIGRA Homepage</a> |
 <a href="functionindex.html">Function Index</a> |
 <a href="classes.html">Class Index</a> |
 <a href="namespaces.html">Namespaces</a> |
 <a href="files.html">File List</a> |
 <a href="index.html">Main Page</a> ]
</p>
<!-- Generated by Doxygen 1.7.6.1 -->
</div>
<div class="contents">
<table class="main_heading">
<tr>
<td width="100%">Import/export of volume data.
</td>
<td align=right><a href="http://hci.iwr.uni-heidelberg.de/vigra/"><IMG border=0 ALT="VIGRA" SRC="documents/vigra.gif" title="VIGRA Homepage"></a></td></tr>
</table><p>

<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvigra_1_1VolumeExportInfo.html">VolumeExportInfo</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Argument object for the function <a class="el" href="group__VolumeImpex.html#gac9a23a3dac8373296367f882493d2d60" title="Function for exporting a 3D volume.">exportVolume()</a>.  <a href="classvigra_1_1VolumeExportInfo.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classvigra_1_1VolumeImportInfo.html">VolumeImportInfo</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Argument object for the function <a class="el" href="group__VolumeImpex.html#gaa8328600a03da4d2849fe33f2a080705" title="Function for importing a 3D volume.">importVolume()</a>.  <a href="classvigra_1_1VolumeImportInfo.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;... &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__VolumeImpex.html#gac9a23a3dac8373296367f882493d2d60">exportVolume</a> (...)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for exporting a 3D volume.  <a href="#gac9a23a3dac8373296367f882493d2d60"></a><br/></td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;... &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__VolumeImpex.html#gaa8328600a03da4d2849fe33f2a080705">importVolume</a> (...)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for importing a 3D volume.  <a href="#gaa8328600a03da4d2849fe33f2a080705"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gaa8328600a03da4d2849fe33f2a080705"></a><!-- doxytag: member="vigra::importVolume" ref="gaa8328600a03da4d2849fe33f2a080705" args="(...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__VolumeImpex.html#gaa8328600a03da4d2849fe33f2a080705">vigra::importVolume</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function for importing a 3D volume. </p>
<p><b>Declarations: </b></p>
<div class="fragment"><pre class="fragment">    <span class="keyword">namespace </span>vigra {
        <span class="comment">// variant 1: read data specified by the given VolumeImportInfo object</span>
        <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> Str<span class="keywordtype">id</span>e&gt;
        <span class="keywordtype">void</span> 
        <a class="code" href="group__VolumeImpex.html#gaa8328600a03da4d2849fe33f2a080705" title="Function for importing a 3D volume.">importVolume</a>(VolumeImportInfo <span class="keyword">const</span> &amp; info, 
                     MultiArrayView &lt;3, T, Stride&gt; &amp;volume);
                     
        <span class="comment">// variant 2: read data using a single filename, resize volume automatically</span>
        <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> Allocator&gt;
        <span class="keywordtype">void</span> 
        <a class="code" href="group__VolumeImpex.html#gaa8328600a03da4d2849fe33f2a080705" title="Function for importing a 3D volume.">importVolume</a>(MultiArray &lt;3, T, Allocator&gt; &amp; volume,
                     <span class="keyword">const</span> std::string &amp;filename);
                           
        <span class="comment">// variant 3: read data from an image stack, resize volume automatically</span>
        <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> Allocator&gt;
        <span class="keywordtype">void</span> 
        <a class="code" href="group__VolumeImpex.html#gaa8328600a03da4d2849fe33f2a080705" title="Function for importing a 3D volume.">importVolume</a>(MultiArray &lt;3, T, Allocator&gt; &amp; volume,
                     <span class="keyword">const</span> std::string &amp;name_base,
                     <span class="keyword">const</span> std::string &amp;name_ext);
    }
</pre></div><p>Data can be read either from a single file containing 3D data (supported formats: Andor .SIF or multi-page TIFF), a ".info" text file which describes the contents of an accompanying raw data file, or a stack of 2D images (numbered according to the scheme <code>name_base+"[0-9]+"+name_extension</code>) each representing a slice of the volume. The decision which of these possibilities applies is taken in the <a class="el" href="classvigra_1_1VolumeImportInfo.html#aeb4a9c422a899543d798bf2575c2daf6">VolumeImportInfo constructor</a>, see there for full details.</p>
<p>Variant 1 is the basic version of this function. Here, the info object and a destination array of approriate size must already be constructed. The other variants are just abbreviations provided for your convenience: </p>
<div class="fragment"><pre class="fragment">    <span class="comment">// variant 2 is equivalent to</span>
    VolumeImportInfo info(filename);
    volume.reshape(info.shape());
    <a class="code" href="group__VolumeImpex.html#gaa8328600a03da4d2849fe33f2a080705" title="Function for importing a 3D volume.">importVolume</a>(info, volume);    <span class="comment">// call variant 1</span>
    
    <span class="comment">// variant 3 is equivalent to</span>
    VolumeImportInfo info(name_base, name_ext);
    volume.reshape(info.shape());
    <a class="code" href="group__VolumeImpex.html#gaa8328600a03da4d2849fe33f2a080705" title="Function for importing a 3D volume.">importVolume</a>(info, volume);    <span class="comment">// call variant 1</span>
</pre></div><p><b> Usage:</b></p>
<p><b>#include</b> &lt;<a class="el" href="multi__impex_8hxx_source.html">vigra/multi_impex.hxx</a>&gt; <br/>
 Namespace: vigra</p>
<div class="fragment"><pre class="fragment">    <span class="comment">// read data from a multi-page TIFF file, using variant 1</span>
    VolumeImportInfo info(<span class="stringliteral">&quot;multipage.tif&quot;</span>);
    MultiArray&lt;3, float&gt; volume(info.shape());
    <a class="code" href="group__VolumeImpex.html#gaa8328600a03da4d2849fe33f2a080705" title="Function for importing a 3D volume.">importVolume</a>(info, volume);
    
    <span class="comment">// read data from a stack of 2D png-images, using variant 1</span>
    VolumeImportInfo info(<span class="stringliteral">&quot;my_data&quot;</span>, <span class="stringliteral">&quot;.png&quot;</span>);  <span class="comment">// looks for files &#39;my_data0.png&#39;, &#39;my_data1.png&#39; etc.</span>
    MultiArray&lt;3, float&gt; volume(info.shape());
    <a class="code" href="group__VolumeImpex.html#gaa8328600a03da4d2849fe33f2a080705" title="Function for importing a 3D volume.">importVolume</a>(info, volume);
</pre></div><p> Notice that slice numbers in a stack need not be consecutive (i.e. gaps are allowed) and will be interpreted according to their numerical order (i.e. "009", "010", "011" are read in the same order as "9", "10", "11"). The number of images found determines the depth of the volume. </p>

</div>
</div>
<a class="anchor" id="gac9a23a3dac8373296367f882493d2d60"></a><!-- doxytag: member="vigra::exportVolume" ref="gac9a23a3dac8373296367f882493d2d60" args="(...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="group__VolumeImpex.html#gac9a23a3dac8373296367f882493d2d60">vigra::exportVolume</a> </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Function for exporting a 3D volume. </p>
<p><b> Declarations:</b></p>
<div class="fragment"><pre class="fragment">    <span class="keyword">namespace </span>vigra {
        <span class="comment">// variant 1: writa data as specified in the given VolumeExportInfo object</span>
        <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> Tag&gt;
        <span class="keywordtype">void</span> 
        <a class="code" href="group__VolumeImpex.html#gac9a23a3dac8373296367f882493d2d60" title="Function for exporting a 3D volume.">exportVolume</a> (MultiArrayView &lt;3, T, Tag&gt; <span class="keyword">const</span> &amp; volume,
                      <span class="keyword">const</span> VolumeExportInfo &amp; info);
                     
        <span class="comment">// variant 2: write data to a multi-page TIFF file</span>
        <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> Tag&gt;
        <span class="keywordtype">void</span>
        <a class="code" href="group__VolumeImpex.html#gac9a23a3dac8373296367f882493d2d60" title="Function for exporting a 3D volume.">exportVolume</a> (MultiArrayView &lt;3, T, Tag&gt; <span class="keyword">const</span> &amp; volume,
                      <span class="keyword">const</span> std::string &amp;filename);
                           
        <span class="comment">// variant 3: write data to an image stack</span>
        <span class="keyword">template</span> &lt;<span class="keyword">class</span> T, <span class="keyword">class</span> Tag&gt;
        <span class="keywordtype">void</span>
        <a class="code" href="group__VolumeImpex.html#gac9a23a3dac8373296367f882493d2d60" title="Function for exporting a 3D volume.">exportVolume</a> (MultiArrayView &lt;3, T, Tag&gt; <span class="keyword">const</span> &amp; volume,
                      <span class="keyword">const</span> std::string &amp;name_base,
                      <span class="keyword">const</span> std::string &amp;name_ext);
    }
</pre></div><p>The volume can either be exported as a multi-page TIFF file (variant 2, only available if libtiff is installed), or as a stack of 2D images, one image per slice (variant 3, files are named according to the scheme <code>name_base+"000"+name_ext</code>, <code>name_base+"001"+name_ext</code> etc.). If the target image format does not support the source <code>value_type</code>, all slices will be mapped to the appropriate target range in the same way.</p>
<p>Variant 1 is the basic version of the function. It allows full control over the export via an already constructed <a class="el" href="classvigra_1_1VolumeExportInfo.html">vigra::VolumeExportInfo</a> object. The other two are just abbreviations that construct the <a class="el" href="classvigra_1_1VolumeExportInfo.html" title="Argument object for the function exportVolume().">VolumeExportInfo</a> object internally.</p>
<p><b> Usage:</b></p>
<p><b>#include</b> &lt;<a class="el" href="multi__impex_8hxx_source.html">vigra/multi_impex.hxx</a>&gt; <br/>
 Namespace: vigra</p>
<div class="fragment"><pre class="fragment">    MultiArray&lt;3, RGBValue&lt;UInt8&gt; &gt; volume(shape);
    ... <span class="comment">// fill in data</span>
    
    <span class="comment">// export a stack named &quot;my_data01.jpg&quot;, &quot;my_data02.jpg&quot; etc.</span>
    VolumeExportInfo info(<span class="stringliteral">&quot;my_data&quot;</span>, <span class="stringliteral">&quot;.jpg&quot;</span>);
    info.setCompression(<span class="stringliteral">&quot;JPEG QUALITY=95&quot;</span>);
    <a class="code" href="group__VolumeImpex.html#gac9a23a3dac8373296367f882493d2d60" title="Function for exporting a 3D volume.">exportVolume</a>(volume, info);
</pre></div> 
</div>
</div>
</div><!-- contents -->
<!-- footer.html -->
<p>
<table border=0 cellspacing=0 width="100%"  bgcolor="#e0d0a0" cellpadding=5>
<tr>
<td>
<p>
<i>&copy; <A HREF="http://hci.iwr.uni-heidelberg.de/people/ukoethe/">Ullrich K&ouml;the</A>     (<A
HREF="mailto:ullrich.koethe@iwr.uni-heidelberg.de">ullrich.koethe@iwr.uni-heidelberg.de</A>)</i> <br>
<i><A HREF="http://hci.iwr.uni-heidelberg.de/">
Heidelberg Collaboratory for Image Processing</a>,
University of Heidelberg, Germany</i>
<td>
<p align=right>
<I>html generated using <A HREF="http://www.doxygen.org">doxygen</A> and <A HREF="http://www.python.org">Python</A></I>
<br>
<i>
vigra 1.9.1 (Thu Sep 5 2013)
</i>
</tr>
</table>


</BODY>
</HTML>
