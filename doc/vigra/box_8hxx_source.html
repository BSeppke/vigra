<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><TITLE>vigra - vigra/box.hxx Source File</TITLE>
<link rel=stylesheet type="text/css" href="vigra.css">
<link rel=stylesheet type="text/css" href="vigra_1_8_2.css">
<link rel="shortcut icon" href="vigra-icon.ico" />
<script type="text/javascript">
function toggleHiddenDocumentation( textID, toggleID, toggleMessage )
{ 
	if( document.getElementById(textID).style.display == 'none' )
    {
		document.getElementById(textID).style.display = 'block';
        document.getElementById(toggleID).innerHTML = "hide " + toggleMessage;
    }
    else
    {
		document.getElementById(textID).style.display = 'none';
        document.getElementById(toggleID).innerHTML = "show " + toggleMessage;
	}
    return false;
}
</script>
</head>
<body  bgcolor="#f8f0e0" link="#0040b0" vlink="#a00040">
<basefont face="Helvetica,Arial,sans-serif" size=3>
<p align=right>
[ <a href="http://hci.iwr.uni-heidelberg.de/vigra/">VIGRA Homepage</a> |
 <a href="functionindex.html">Function Index</a> |
 <a href="classes.html">Class Index</a> |
 <a href="namespaces.html">Namespaces</a> |
 <a href="files.html">File List</a> |
 <a href="index.html">Main Page</a> ]
</p>
<!-- Generated by Doxygen 1.7.6.1 -->
</div>
<div class="contents">
<table class="main_heading">
<tr>
<td width="100%">vigra/box.hxx
</td>
<td align=right><a href="http://hci.iwr.uni-heidelberg.de/vigra/"><IMG border=0 ALT="VIGRA" SRC="documents/vigra.gif" title="VIGRA Homepage"></a></td></tr>
</table><p>

<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/************************************************************************/</span>
<a name="l00002"></a>00002 <span class="comment">/*                                                                      */</span>
<a name="l00003"></a>00003 <span class="comment">/*     Copyright 2009-2010 by Ullrich Koethe and Hans Meine             */</span>
<a name="l00004"></a>00004 <span class="comment">/*                                                                      */</span>
<a name="l00005"></a>00005 <span class="comment">/*    This file is part of the VIGRA computer vision library.           */</span>
<a name="l00006"></a>00006 <span class="comment">/*    The VIGRA Website is                                              */</span>
<a name="l00007"></a>00007 <span class="comment">/*        http://hci.iwr.uni-heidelberg.de/vigra/                       */</span>
<a name="l00008"></a>00008 <span class="comment">/*    Please direct questions, bug reports, and contributions to        */</span>
<a name="l00009"></a>00009 <span class="comment">/*        ullrich.koethe@iwr.uni-heidelberg.de    or                    */</span>
<a name="l00010"></a>00010 <span class="comment">/*        vigra@informatik.uni-hamburg.de                               */</span>
<a name="l00011"></a>00011 <span class="comment">/*                                                                      */</span>
<a name="l00012"></a>00012 <span class="comment">/*    Permission is hereby granted, free of charge, to any person       */</span>
<a name="l00013"></a>00013 <span class="comment">/*    obtaining a copy of this software and associated documentation    */</span>
<a name="l00014"></a>00014 <span class="comment">/*    files (the &quot;Software&quot;), to deal in the Software without           */</span>
<a name="l00015"></a>00015 <span class="comment">/*    restriction, including without limitation the rights to use,      */</span>
<a name="l00016"></a>00016 <span class="comment">/*    copy, modify, merge, publish, distribute, sublicense, and/or      */</span>
<a name="l00017"></a>00017 <span class="comment">/*    sell copies of the Software, and to permit persons to whom the    */</span>
<a name="l00018"></a>00018 <span class="comment">/*    Software is furnished to do so, subject to the following          */</span>
<a name="l00019"></a>00019 <span class="comment">/*    conditions:                                                       */</span>
<a name="l00020"></a>00020 <span class="comment">/*                                                                      */</span>
<a name="l00021"></a>00021 <span class="comment">/*    The above copyright notice and this permission notice shall be    */</span>
<a name="l00022"></a>00022 <span class="comment">/*    included in all copies or substantial portions of the             */</span>
<a name="l00023"></a>00023 <span class="comment">/*    Software.                                                         */</span>
<a name="l00024"></a>00024 <span class="comment">/*                                                                      */</span>
<a name="l00025"></a>00025 <span class="comment">/*    THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND    */</span>
<a name="l00026"></a>00026 <span class="comment">/*    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES   */</span>
<a name="l00027"></a>00027 <span class="comment">/*    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND          */</span>
<a name="l00028"></a>00028 <span class="comment">/*    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT       */</span>
<a name="l00029"></a>00029 <span class="comment">/*    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,      */</span>
<a name="l00030"></a>00030 <span class="comment">/*    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING      */</span>
<a name="l00031"></a>00031 <span class="comment">/*    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR     */</span>
<a name="l00032"></a>00032 <span class="comment">/*    OTHER DEALINGS IN THE SOFTWARE.                                   */</span>
<a name="l00033"></a>00033 <span class="comment">/*                                                                      */</span>
<a name="l00034"></a>00034 <span class="comment">/************************************************************************/</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="preprocessor">#ifndef VIGRA_BOX_HXX</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="preprocessor">#define VIGRA_BOX_HXX</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;metaprogramming.hxx&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;numerictraits.hxx&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;tinyvector.hxx&quot;</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="keyword">namespace </span>vigra {
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="keyword">namespace </span>detail {
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="comment">// RangePolicy used for floating point coordinate types</span>
<a name="l00048"></a>00048 <span class="keyword">template</span>&lt;<span class="keyword">class</span> VALUETYPE&gt;
<a name="l00049"></a>00049 <span class="keyword">struct </span>EndInsidePolicy
<a name="l00050"></a>00050 {
<a name="l00051"></a>00051     <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> isEmptyRange(VALUETYPE b, VALUETYPE e)
<a name="l00052"></a>00052     {
<a name="l00053"></a>00053         <span class="keywordflow">return</span> e &lt; b; <span class="comment">// &lt;=</span>
<a name="l00054"></a>00054     }
<a name="l00055"></a>00055 
<a name="l00056"></a>00056     <span class="keyword">static</span> <span class="keyword">inline</span> VALUETYPE pointEnd(VALUETYPE p)
<a name="l00057"></a>00057     {
<a name="l00058"></a>00058         <span class="keywordflow">return</span> p; <span class="comment">// +1</span>
<a name="l00059"></a>00059     }
<a name="l00060"></a>00060 };
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 <span class="comment">// RangePolicy used for integer coordinate types</span>
<a name="l00063"></a>00063 <span class="keyword">template</span>&lt;<span class="keyword">class</span> VALUETYPE&gt;
<a name="l00064"></a>00064 <span class="keyword">struct </span>EndOutsidePolicy
<a name="l00065"></a>00065 {
<a name="l00066"></a>00066     <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> isEmptyRange(VALUETYPE b, VALUETYPE e)
<a name="l00067"></a>00067     {
<a name="l00068"></a>00068         <span class="keywordflow">return</span> e &lt;= b;
<a name="l00069"></a>00069     }
<a name="l00070"></a>00070 
<a name="l00071"></a>00071     <span class="keyword">static</span> <span class="keyword">inline</span> VALUETYPE pointEnd(VALUETYPE p)
<a name="l00072"></a>00072     {
<a name="l00073"></a>00073         <span class="keywordflow">return</span> p+1;
<a name="l00074"></a>00074     }
<a name="l00075"></a>00075 };
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 } <span class="comment">// namespace vigra::detail</span>
<a name="l00078"></a>00078 <span class="comment"></span>
<a name="l00079"></a>00079 <span class="comment">/** \addtogroup RangesAndPoints */</span><span class="comment"></span>
<a name="l00080"></a>00080 <span class="comment">//@{</span>
<a name="l00081"></a>00081 <span class="comment"></span><span class="comment">   /** \brief Represent an n-dimensional box as a (begin, end) pair.</span>
<a name="l00082"></a>00082 <span class="comment">     * Depending on the value type, end() is considered to be</span>
<a name="l00083"></a>00083 <span class="comment">     * outside the box (as in the STL, for integer types), or</span>
<a name="l00084"></a>00084 <span class="comment">     * inside (for floating point types).  size() will always be</span>
<a name="l00085"></a>00085 <span class="comment">     * end() - begin().</span>
<a name="l00086"></a>00086 <span class="comment">     */</span>
<a name="l00087"></a>00087 <span class="keyword">template</span>&lt;<span class="keyword">class</span> VALUETYPE, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> DIMENSION&gt;
<a name="l00088"></a><a class="code" href="classvigra_1_1Box.html">00088</a> <span class="keyword">class </span><a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a>
<a name="l00089"></a>00089 {
<a name="l00090"></a>00090   <span class="keyword">public</span>:<span class="comment"></span>
<a name="l00091"></a>00091 <span class="comment">        /** STL-compatible definition of coordinate valuetype</span>
<a name="l00092"></a>00092 <span class="comment">         */</span>
<a name="l00093"></a><a class="code" href="classvigra_1_1Box.html#ad81add7f462b51d2bedbccd43c12e32a">00093</a>     <span class="keyword">typedef</span> VALUETYPE <a class="code" href="classvigra_1_1Box.html#ad81add7f462b51d2bedbccd43c12e32a">value_type</a>;
<a name="l00094"></a>00094 <span class="comment"></span>
<a name="l00095"></a>00095 <span class="comment">        /** Promoted coordinate valuetype, used for volume()</span>
<a name="l00096"></a>00096 <span class="comment">         */</span>
<a name="l00097"></a><a class="code" href="classvigra_1_1Box.html#ab321b1775abba91d6b2198a7fbd65772">00097</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> NumericTraits&lt;VALUETYPE&gt;::Promote <a class="code" href="classvigra_1_1Box.html#ab321b1775abba91d6b2198a7fbd65772">VolumeType</a>;
<a name="l00098"></a>00098 <span class="comment"></span>
<a name="l00099"></a>00099 <span class="comment">        /** Vector type used for begin() and end()</span>
<a name="l00100"></a>00100 <span class="comment">         */</span>
<a name="l00101"></a><a class="code" href="classvigra_1_1Box.html#ad14b2259fe268efc6a1679b6159741f8">00101</a>     <span class="keyword">typedef</span> <a class="code" href="classvigra_1_1TinyVector.html">TinyVector&lt;VALUETYPE, DIMENSION&gt;</a> <a class="code" href="classvigra_1_1Box.html#ad14b2259fe268efc6a1679b6159741f8">Vector</a>;
<a name="l00102"></a>00102 
<a name="l00103"></a>00103     <span class="keyword">enum</span> { Dimension = DIMENSION };
<a name="l00104"></a>00104 
<a name="l00105"></a>00105   <span class="keyword">protected</span>:
<a name="l00106"></a>00106     <a class="code" href="classvigra_1_1Box.html#ad14b2259fe268efc6a1679b6159741f8">Vector</a> begin_, end_;
<a name="l00107"></a>00107 <span class="comment"></span>
<a name="l00108"></a>00108 <span class="comment">        /** Range policy (EndInsidePolicy/EndOutsidePolicy, depending on valuetype)</span>
<a name="l00109"></a>00109 <span class="comment">         */</span>
<a name="l00110"></a>00110     <span class="keyword">typedef</span> <span class="keyword">typename</span> If&lt;typename NumericTraits&lt;VALUETYPE&gt;::isIntegral,
<a name="l00111"></a>00111                         detail::EndOutsidePolicy&lt;VALUETYPE&gt;,
<a name="l00112"></a><a class="code" href="classvigra_1_1Box.html#a3d5493241c593c33d0d7752519723ae7">00112</a>                         detail::EndInsidePolicy&lt;VALUETYPE&gt; &gt;::type <a class="code" href="classvigra_1_1Box.html#a3d5493241c593c33d0d7752519723ae7">RangePolicy</a>;
<a name="l00113"></a>00113 
<a name="l00114"></a>00114   <span class="keyword">public</span>:<span class="comment"></span>
<a name="l00115"></a>00115 <span class="comment">        /** Construct an empty box (isEmpty() will return true).</span>
<a name="l00116"></a>00116 <span class="comment">         * (Internally, this will initialize all dimensions with the</span>
<a name="l00117"></a>00117 <span class="comment">         * empty range [1..0].)</span>
<a name="l00118"></a>00118 <span class="comment">         */</span>
<a name="l00119"></a><a class="code" href="classvigra_1_1Box.html#adea1928c15ca1eb88b6619bc554911b5">00119</a>     <a class="code" href="classvigra_1_1Box.html#adea1928c15ca1eb88b6619bc554911b5">Box</a>()
<a name="l00120"></a>00120     : begin_(NumericTraits&lt;<a class="code" href="classvigra_1_1TinyVector.html">Vector</a>&gt;::one())
<a name="l00121"></a>00121     {}
<a name="l00122"></a>00122 <span class="comment"></span>
<a name="l00123"></a>00123 <span class="comment">        /** Construct a box representing the given range.  Depending</span>
<a name="l00124"></a>00124 <span class="comment">         * on the value type, end() is considered to be outside the</span>
<a name="l00125"></a>00125 <span class="comment">         * box (as in the STL, for integer types), or inside (for</span>
<a name="l00126"></a>00126 <span class="comment">         * floating point types).</span>
<a name="l00127"></a>00127 <span class="comment">         */</span>
<a name="l00128"></a><a class="code" href="classvigra_1_1Box.html#ad7522e67d11a7c0cf3a44f9fe1d3b2a5">00128</a>     <a class="code" href="classvigra_1_1Box.html#adea1928c15ca1eb88b6619bc554911b5">Box</a>(<a class="code" href="classvigra_1_1TinyVector.html">Vector</a> <span class="keyword">const</span> &amp;<a class="code" href="classvigra_1_1Box.html#ab5ec0747e592aa60fde4d4c4ba393208">begin</a>, <a class="code" href="classvigra_1_1TinyVector.html">Vector</a> <span class="keyword">const</span> &amp;<a class="code" href="classvigra_1_1Box.html#aefbbd52b29086bcae04a0b40178f2885">end</a>)
<a name="l00129"></a>00129     : begin_(begin), end_(end)
<a name="l00130"></a>00130     {}
<a name="l00131"></a>00131 <span class="comment"></span>
<a name="l00132"></a>00132 <span class="comment">        /** Construct a box of given size at the origin (i.e. end() ==</span>
<a name="l00133"></a>00133 <span class="comment">         * size()).</span>
<a name="l00134"></a>00134 <span class="comment">         */</span>
<a name="l00135"></a><a class="code" href="classvigra_1_1Box.html#a6c657ccf8552821947ad1569a1039bbb">00135</a>     <span class="keyword">explicit</span> <a class="code" href="classvigra_1_1Box.html#adea1928c15ca1eb88b6619bc554911b5">Box</a>(<a class="code" href="classvigra_1_1TinyVector.html">Vector</a> <span class="keyword">const</span> &amp;<a class="code" href="classvigra_1_1Box.html#a1c84c6eaf4e01d65c070547607cbeb8d">size</a>)
<a name="l00136"></a>00136     : end_(size)
<a name="l00137"></a>00137     {}
<a name="l00138"></a>00138 <span class="comment"></span>
<a name="l00139"></a>00139 <span class="comment">        /** Get begin vector (i.e. smallest coordinates for each</span>
<a name="l00140"></a>00140 <span class="comment">         * dimension).  This is the first point (scan-order wise)</span>
<a name="l00141"></a>00141 <span class="comment">         * which is considered to be &quot;in&quot; the box.</span>
<a name="l00142"></a>00142 <span class="comment">         */</span>
<a name="l00143"></a><a class="code" href="classvigra_1_1Box.html#ab5ec0747e592aa60fde4d4c4ba393208">00143</a>     <a class="code" href="classvigra_1_1TinyVector.html">Vector</a> <span class="keyword">const</span> &amp; <a class="code" href="classvigra_1_1Box.html#ab5ec0747e592aa60fde4d4c4ba393208">begin</a>()<span class="keyword"> const</span>
<a name="l00144"></a>00144 <span class="keyword">    </span>{
<a name="l00145"></a>00145         <span class="keywordflow">return</span> begin_;
<a name="l00146"></a>00146     }
<a name="l00147"></a>00147 <span class="comment"></span>
<a name="l00148"></a>00148 <span class="comment">        /** Access begin vector (i.e. smallest coordinates for each</span>
<a name="l00149"></a>00149 <span class="comment">         * dimension).  This is the first point (scan-order wise)</span>
<a name="l00150"></a>00150 <span class="comment">         * which is considered to be &quot;in&quot; the box.</span>
<a name="l00151"></a>00151 <span class="comment">         */</span>
<a name="l00152"></a><a class="code" href="classvigra_1_1Box.html#a9ff7568951abbeeb1ca4497106b77b77">00152</a>     <a class="code" href="classvigra_1_1TinyVector.html">Vector</a> &amp; <a class="code" href="classvigra_1_1Box.html#ab5ec0747e592aa60fde4d4c4ba393208">begin</a>()
<a name="l00153"></a>00153     {
<a name="l00154"></a>00154         <span class="keywordflow">return</span> begin_;
<a name="l00155"></a>00155     }
<a name="l00156"></a>00156 <span class="comment"></span>
<a name="l00157"></a>00157 <span class="comment">        /** Get end vector (i.e. coordinates higher than begin() in</span>
<a name="l00158"></a>00158 <span class="comment">         * each dimension for non-empty boxes).  This is begin() +</span>
<a name="l00159"></a>00159 <span class="comment">         * size(), and depending on the valuetype (float/int), this is</span>
<a name="l00160"></a>00160 <span class="comment">         * the last point within or the first point outside the box,</span>
<a name="l00161"></a>00161 <span class="comment">         * respectively.</span>
<a name="l00162"></a>00162 <span class="comment">         */</span>
<a name="l00163"></a><a class="code" href="classvigra_1_1Box.html#aefbbd52b29086bcae04a0b40178f2885">00163</a>     <a class="code" href="classvigra_1_1TinyVector.html">Vector</a> <span class="keyword">const</span> &amp; <a class="code" href="classvigra_1_1Box.html#aefbbd52b29086bcae04a0b40178f2885">end</a>()<span class="keyword"> const</span>
<a name="l00164"></a>00164 <span class="keyword">    </span>{
<a name="l00165"></a>00165         <span class="keywordflow">return</span> end_;
<a name="l00166"></a>00166     }
<a name="l00167"></a>00167 <span class="comment"></span>
<a name="l00168"></a>00168 <span class="comment">        /** Access end vector (i.e. coordinates higher than begin() in</span>
<a name="l00169"></a>00169 <span class="comment">         * each dimension for non-empty boxes).  This is begin() +</span>
<a name="l00170"></a>00170 <span class="comment">         * size(), and depending on the valuetype (float/int), this is</span>
<a name="l00171"></a>00171 <span class="comment">         * the last point within or the first point outside the box,</span>
<a name="l00172"></a>00172 <span class="comment">         * respectively.</span>
<a name="l00173"></a>00173 <span class="comment">         */</span>
<a name="l00174"></a><a class="code" href="classvigra_1_1Box.html#a1d60efdd2ef2dc80805ce6fd301e92b4">00174</a>     <a class="code" href="classvigra_1_1TinyVector.html">Vector</a> &amp; <a class="code" href="classvigra_1_1Box.html#aefbbd52b29086bcae04a0b40178f2885">end</a>()
<a name="l00175"></a>00175     {
<a name="l00176"></a>00176         <span class="keywordflow">return</span> end_;
<a name="l00177"></a>00177     }
<a name="l00178"></a>00178 <span class="comment"></span>
<a name="l00179"></a>00179 <span class="comment">        /** Change begin() without changing end(), changing size()</span>
<a name="l00180"></a>00180 <span class="comment">         * accordingly.</span>
<a name="l00181"></a>00181 <span class="comment">         */</span>
<a name="l00182"></a><a class="code" href="classvigra_1_1Box.html#a18602c68427559df02f93556347a21b1">00182</a>     <span class="keywordtype">void</span> <a class="code" href="classvigra_1_1Box.html#a18602c68427559df02f93556347a21b1">setBegin</a>(<a class="code" href="classvigra_1_1TinyVector.html">Vector</a> <span class="keyword">const</span> &amp;<a class="code" href="classvigra_1_1Box.html#ab5ec0747e592aa60fde4d4c4ba393208">begin</a>)
<a name="l00183"></a>00183     {
<a name="l00184"></a>00184         begin_ = <a class="code" href="classvigra_1_1Box.html#ab5ec0747e592aa60fde4d4c4ba393208">begin</a>;
<a name="l00185"></a>00185     }
<a name="l00186"></a>00186 <span class="comment"></span>
<a name="l00187"></a>00187 <span class="comment">        /** Change end() without changing begin(), which will change</span>
<a name="l00188"></a>00188 <span class="comment">         * the size() most probably.</span>
<a name="l00189"></a>00189 <span class="comment">         */</span>
<a name="l00190"></a><a class="code" href="classvigra_1_1Box.html#afa3910c284041e0095196aec7f6ea33f">00190</a>     <span class="keywordtype">void</span> <a class="code" href="classvigra_1_1Box.html#afa3910c284041e0095196aec7f6ea33f">setEnd</a>(<a class="code" href="classvigra_1_1TinyVector.html">Vector</a> <span class="keyword">const</span> &amp;<a class="code" href="classvigra_1_1Box.html#aefbbd52b29086bcae04a0b40178f2885">end</a>)
<a name="l00191"></a>00191     {
<a name="l00192"></a>00192         end_ = <a class="code" href="classvigra_1_1Box.html#aefbbd52b29086bcae04a0b40178f2885">end</a>;
<a name="l00193"></a>00193     }
<a name="l00194"></a>00194 <span class="comment"></span>
<a name="l00195"></a>00195 <span class="comment">        /** Move the whole box so that the given point will be</span>
<a name="l00196"></a>00196 <span class="comment">         * begin() afterwards.</span>
<a name="l00197"></a>00197 <span class="comment">         */</span>
<a name="l00198"></a><a class="code" href="classvigra_1_1Box.html#aa0c926963e1ba5b95c0f7303c5f15f16">00198</a>     <span class="keywordtype">void</span> <a class="code" href="classvigra_1_1Box.html#aa0c926963e1ba5b95c0f7303c5f15f16">moveTo</a>(<a class="code" href="classvigra_1_1TinyVector.html">Vector</a> <span class="keyword">const</span> &amp;newBegin)
<a name="l00199"></a>00199     {
<a name="l00200"></a>00200         end_ += newBegin - begin_;
<a name="l00201"></a>00201         begin_ = newBegin;
<a name="l00202"></a>00202     }
<a name="l00203"></a>00203 <span class="comment"></span>
<a name="l00204"></a>00204 <span class="comment">        /** Move the whole box by the given offset.</span>
<a name="l00205"></a>00205 <span class="comment">         * (Equivalent to operator+=)</span>
<a name="l00206"></a>00206 <span class="comment">         */</span>
<a name="l00207"></a><a class="code" href="classvigra_1_1Box.html#ad52cdab7078c100c0bcb821df9a8a89e">00207</a>     <span class="keywordtype">void</span> <a class="code" href="classvigra_1_1Box.html#ad52cdab7078c100c0bcb821df9a8a89e">moveBy</a>(<a class="code" href="classvigra_1_1TinyVector.html">Vector</a> <span class="keyword">const</span> &amp;offset)
<a name="l00208"></a>00208     {
<a name="l00209"></a>00209         begin_ += offset;
<a name="l00210"></a>00210         end_ += offset;
<a name="l00211"></a>00211     }
<a name="l00212"></a>00212 <span class="comment"></span>
<a name="l00213"></a>00213 <span class="comment">        /** Determine and return the area of this box. That is,</span>
<a name="l00214"></a>00214 <span class="comment">         * if this rect isEmpty(), returns zero, otherwise returns the</span>
<a name="l00215"></a>00215 <span class="comment">         * product of the extents in each dimension.</span>
<a name="l00216"></a>00216 <span class="comment">         */</span>
<a name="l00217"></a><a class="code" href="classvigra_1_1Box.html#aefd8c9ee173950456851737d2a403b42">00217</a>     <a class="code" href="classvigra_1_1Box.html#ab321b1775abba91d6b2198a7fbd65772">VolumeType</a> <a class="code" href="classvigra_1_1Box.html#aefd8c9ee173950456851737d2a403b42">volume</a>()<span class="keyword"> const</span>
<a name="l00218"></a>00218 <span class="keyword">    </span>{
<a name="l00219"></a>00219         <span class="keywordflow">if</span>(<a class="code" href="classvigra_1_1Box.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>())
<a name="l00220"></a>00220             <span class="keywordflow">return</span> 0;
<a name="l00221"></a>00221 
<a name="l00222"></a>00222         <a class="code" href="classvigra_1_1Box.html#ab321b1775abba91d6b2198a7fbd65772">VolumeType</a> result(end_[0] - begin_[0]);
<a name="l00223"></a>00223         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 1; i &lt; DIMENSION; ++i)
<a name="l00224"></a>00224             result *= end_[i] - begin_[i];
<a name="l00225"></a>00225         <span class="keywordflow">return</span> result;
<a name="l00226"></a>00226     }
<a name="l00227"></a>00227 <span class="comment"></span>
<a name="l00228"></a>00228 <span class="comment">        /** Determine and return the size of this box. The size</span>
<a name="l00229"></a>00229 <span class="comment">         * might be zero or even negative in one or more dimensions,</span>
<a name="l00230"></a>00230 <span class="comment">         * and if so, isEmpty() will return true.</span>
<a name="l00231"></a>00231 <span class="comment">         */</span>
<a name="l00232"></a><a class="code" href="classvigra_1_1Box.html#a1c84c6eaf4e01d65c070547607cbeb8d">00232</a>     <a class="code" href="classvigra_1_1TinyVector.html">Vector</a> <a class="code" href="classvigra_1_1Box.html#a1c84c6eaf4e01d65c070547607cbeb8d">size</a>()<span class="keyword"> const</span>
<a name="l00233"></a>00233 <span class="keyword">    </span>{
<a name="l00234"></a>00234         <span class="keywordflow">return</span> end_ - begin_;
<a name="l00235"></a>00235     }
<a name="l00236"></a>00236 <span class="comment"></span>
<a name="l00237"></a>00237 <span class="comment">        /** Resize this box to the given extents. This will</span>
<a name="l00238"></a>00238 <span class="comment">         * change end() only.</span>
<a name="l00239"></a>00239 <span class="comment">         */</span>
<a name="l00240"></a><a class="code" href="classvigra_1_1Box.html#a1f4aca421455bc43a2caf7418bd99c5a">00240</a>     <span class="keywordtype">void</span> <a class="code" href="classvigra_1_1Box.html#a1f4aca421455bc43a2caf7418bd99c5a">setSize</a>(<a class="code" href="classvigra_1_1TinyVector.html">Vector</a> <span class="keyword">const</span> &amp;<a class="code" href="classvigra_1_1Box.html#a1c84c6eaf4e01d65c070547607cbeb8d">size</a>)
<a name="l00241"></a>00241     {
<a name="l00242"></a>00242         end_ = begin_ + <a class="code" href="classvigra_1_1Box.html#a1c84c6eaf4e01d65c070547607cbeb8d">size</a>;
<a name="l00243"></a>00243     }
<a name="l00244"></a>00244 <span class="comment"></span>
<a name="l00245"></a>00245 <span class="comment">        /** Increase the size of the box by the given</span>
<a name="l00246"></a>00246 <span class="comment">         * offset. This will move end() only. (If any of offset&#39;s</span>
<a name="l00247"></a>00247 <span class="comment">         * components is negative, the box will get smaller</span>
<a name="l00248"></a>00248 <span class="comment">         * accordingly.)</span>
<a name="l00249"></a>00249 <span class="comment">         */</span>
<a name="l00250"></a><a class="code" href="classvigra_1_1Box.html#a40d04d5b7a119f977eb4a53752a07a58">00250</a>     <span class="keywordtype">void</span> <a class="code" href="classvigra_1_1Box.html#a40d04d5b7a119f977eb4a53752a07a58">addSize</a>(<a class="code" href="classvigra_1_1TinyVector.html">Vector</a> <span class="keyword">const</span> &amp;offset)
<a name="l00251"></a>00251     {
<a name="l00252"></a>00252         end_ += offset;
<a name="l00253"></a>00253     }
<a name="l00254"></a>00254 <span class="comment"></span>
<a name="l00255"></a>00255 <span class="comment">        /** Adds a border of the given width around the box. That</span>
<a name="l00256"></a>00256 <span class="comment">         * means, begin()&#39;s components are moved by -borderWidth</span>
<a name="l00257"></a>00257 <span class="comment">         * and end()&#39;s by borderWidth. (If borderWidth is</span>
<a name="l00258"></a>00258 <span class="comment">         * negative, the box will get smaller accordingly.)</span>
<a name="l00259"></a>00259 <span class="comment">         */</span>
<a name="l00260"></a><a class="code" href="classvigra_1_1Box.html#aee571effca1ebf48ab0fcfa28c9d5119">00260</a>     <span class="keywordtype">void</span> <a class="code" href="classvigra_1_1Box.html#aee571effca1ebf48ab0fcfa28c9d5119">addBorder</a>(VALUETYPE borderWidth)
<a name="l00261"></a>00261     {
<a name="l00262"></a>00262         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; DIMENSION; ++i)
<a name="l00263"></a>00263         {
<a name="l00264"></a>00264             begin_[i] -= borderWidth;
<a name="l00265"></a>00265             end_[i]   += borderWidth;
<a name="l00266"></a>00266         }
<a name="l00267"></a>00267     }
<a name="l00268"></a>00268 <span class="comment"></span>
<a name="l00269"></a>00269 <span class="comment">        /// equality check</span>
<a name="l00270"></a><a class="code" href="classvigra_1_1Box.html#a1f6b13f5d8fe121ede8602ed0d5951cb">00270</a> <span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classvigra_1_1Box.html#a1f6b13f5d8fe121ede8602ed0d5951cb" title="equality check">operator==</a>(<a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> <span class="keyword">const</span> &amp;r)<span class="keyword"> const</span>
<a name="l00271"></a>00271 <span class="keyword">    </span>{
<a name="l00272"></a>00272         <span class="keywordflow">return</span> (begin_ == r.begin_) &amp;&amp; (end_ == r.end_);
<a name="l00273"></a>00273     }
<a name="l00274"></a>00274 <span class="comment"></span>
<a name="l00275"></a>00275 <span class="comment">        /// inequality check</span>
<a name="l00276"></a><a class="code" href="classvigra_1_1Box.html#afd00a79053e41a9f0a339e3cfd9174b9">00276</a> <span class="comment"></span>    <span class="keywordtype">bool</span> <a class="code" href="classvigra_1_1Box.html#afd00a79053e41a9f0a339e3cfd9174b9" title="inequality check">operator!=</a>(<a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> <span class="keyword">const</span> &amp;r)<span class="keyword"> const</span>
<a name="l00277"></a>00277 <span class="keyword">    </span>{
<a name="l00278"></a>00278         <span class="keywordflow">return</span> (begin_ != r.begin_) || (end_ != r.end_);
<a name="l00279"></a>00279     }
<a name="l00280"></a>00280 <span class="comment"></span>
<a name="l00281"></a>00281 <span class="comment">        /** Return whether this box is considered empty. It is</span>
<a name="l00282"></a>00282 <span class="comment">         * non-empty if all end() coordinates are greater than (or</span>
<a name="l00283"></a>00283 <span class="comment">         * equal, for floating point valuetypes) the corresponding</span>
<a name="l00284"></a>00284 <span class="comment">         * begin() coordinates. Uniting an empty box with something</span>
<a name="l00285"></a>00285 <span class="comment">         * will return the bounding box of the &#39;something&#39;, and</span>
<a name="l00286"></a>00286 <span class="comment">         * intersecting any box with an empty box will again yield an</span>
<a name="l00287"></a>00287 <span class="comment">         * empty box.</span>
<a name="l00288"></a>00288 <span class="comment">         */</span>
<a name="l00289"></a><a class="code" href="classvigra_1_1Box.html#a479432127ee77145cc19d6a2d1590821">00289</a>     <span class="keywordtype">bool</span> <a class="code" href="classvigra_1_1Box.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>()<span class="keyword"> const</span>
<a name="l00290"></a>00290 <span class="keyword">    </span>{
<a name="l00291"></a>00291         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; DIMENSION; ++i)
<a name="l00292"></a>00292             <span class="keywordflow">if</span>(RangePolicy::isEmptyRange(begin_[i], end_[i]))
<a name="l00293"></a>00293                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00294"></a>00294         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00295"></a>00295     }
<a name="l00296"></a>00296 <span class="comment"></span>
<a name="l00297"></a>00297 <span class="comment">        /** Return whether this box contains the given point.</span>
<a name="l00298"></a>00298 <span class="comment">         * That is, if the point lies within the range [begin, end] in</span>
<a name="l00299"></a>00299 <span class="comment">         * each dimension (excluding end() itself for integer valuetypes).</span>
<a name="l00300"></a>00300 <span class="comment">         */</span>
<a name="l00301"></a><a class="code" href="classvigra_1_1Box.html#a585852dcee4352858ae6e704a6a5c21e">00301</a>     <span class="keywordtype">bool</span> <a class="code" href="classvigra_1_1Box.html#a585852dcee4352858ae6e704a6a5c21e">contains</a>(<a class="code" href="classvigra_1_1TinyVector.html">Vector</a> <span class="keyword">const</span> &amp;p)<span class="keyword"> const</span>
<a name="l00302"></a>00302 <span class="keyword">    </span>{
<a name="l00303"></a>00303         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; DIMENSION; ++i)
<a name="l00304"></a>00304             <span class="keywordflow">if</span>((p[i] &lt; begin_[i]) ||
<a name="l00305"></a>00305                RangePolicy::isEmptyRange(p[i], end_[i]))
<a name="l00306"></a>00306                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00307"></a>00307         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00308"></a>00308     }
<a name="l00309"></a>00309 <span class="comment"></span>
<a name="l00310"></a>00310 <span class="comment">        /** Return whether this box contains the given</span>
<a name="l00311"></a>00311 <span class="comment">         * one. &lt;tt&gt;r1.contains(r2)&lt;/tt&gt; returns the same as</span>
<a name="l00312"></a>00312 <span class="comment">         * &lt;tt&gt;r1 == (r1|r2)&lt;/tt&gt; (but is of course more</span>
<a name="l00313"></a>00313 <span class="comment">         * efficient). That also means, a box (even an empty one!)</span>
<a name="l00314"></a>00314 <span class="comment">         * contains() any empty box.</span>
<a name="l00315"></a>00315 <span class="comment">         */</span>
<a name="l00316"></a><a class="code" href="classvigra_1_1Box.html#a7de8695fa94b9886d54a6cb878af63b7">00316</a>     <span class="keywordtype">bool</span> <a class="code" href="classvigra_1_1Box.html#a585852dcee4352858ae6e704a6a5c21e">contains</a>(<a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> <span class="keyword">const</span> &amp;r)<span class="keyword"> const</span>
<a name="l00317"></a>00317 <span class="keyword">    </span>{
<a name="l00318"></a>00318         <span class="keywordflow">if</span>(r.<a class="code" href="classvigra_1_1Box.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>())
<a name="l00319"></a>00319             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00320"></a>00320         <span class="keywordflow">if</span>(!<a class="code" href="classvigra_1_1Box.html#a585852dcee4352858ae6e704a6a5c21e">contains</a>(r.begin_))
<a name="l00321"></a>00321             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00322"></a>00322         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; DIMENSION; ++i)
<a name="l00323"></a>00323             <span class="keywordflow">if</span>(r.end_[i] &gt; end_[i])
<a name="l00324"></a>00324                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00325"></a>00325         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00326"></a>00326     }
<a name="l00327"></a>00327 <span class="comment"></span>
<a name="l00328"></a>00328 <span class="comment">        /** Return whether this box overlaps with the given</span>
<a name="l00329"></a>00329 <span class="comment">         * one. &lt;tt&gt;r1.intersects(r2)&lt;/tt&gt; returns the same as</span>
<a name="l00330"></a>00330 <span class="comment">         * &lt;tt&gt;!(r1&amp;r2).isEmpty()&lt;/tt&gt; (but is of course much more</span>
<a name="l00331"></a>00331 <span class="comment">         * efficient).</span>
<a name="l00332"></a>00332 <span class="comment">         */</span>
<a name="l00333"></a><a class="code" href="classvigra_1_1Box.html#a4da74e8f66ac61d3cddc3f5c85060922">00333</a>     <span class="keywordtype">bool</span> <a class="code" href="classvigra_1_1Box.html#a4da74e8f66ac61d3cddc3f5c85060922">intersects</a>(<a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> <span class="keyword">const</span> &amp;r)<span class="keyword"> const</span>
<a name="l00334"></a>00334 <span class="keyword">    </span>{
<a name="l00335"></a>00335         <span class="keywordflow">if</span>(r.<a class="code" href="classvigra_1_1Box.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>() || <a class="code" href="classvigra_1_1Box.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>())
<a name="l00336"></a>00336             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00337"></a>00337         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; DIMENSION; ++i)
<a name="l00338"></a>00338             <span class="keywordflow">if</span>(RangePolicy::isEmptyRange(r.begin_[i], end_[i]) ||
<a name="l00339"></a>00339                RangePolicy::isEmptyRange(begin_[i], r.end_[i]))
<a name="l00340"></a>00340                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00341"></a>00341         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00342"></a>00342     }
<a name="l00343"></a>00343 <span class="comment"></span>
<a name="l00344"></a>00344 <span class="comment">        /** Modifies this box by including the given point.</span>
<a name="l00345"></a>00345 <span class="comment">         * The result will be the bounding box of the box and the</span>
<a name="l00346"></a>00346 <span class="comment">         * point.  If isEmpty() returns true on the original box, the</span>
<a name="l00347"></a>00347 <span class="comment">         * union will be a box containing only the given point.</span>
<a name="l00348"></a>00348 <span class="comment">         */</span>
<a name="l00349"></a><a class="code" href="classvigra_1_1Box.html#a056e8550c09d2534db6faca78ea923d1">00349</a>     <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> &amp;<a class="code" href="classvigra_1_1Box.html#a056e8550c09d2534db6faca78ea923d1">operator|=</a>(<a class="code" href="classvigra_1_1TinyVector.html">Vector</a> <span class="keyword">const</span> &amp;p)
<a name="l00350"></a>00350     {
<a name="l00351"></a>00351         <span class="keywordflow">if</span>(<a class="code" href="classvigra_1_1Box.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>())
<a name="l00352"></a>00352         {
<a name="l00353"></a>00353             begin_ = p;
<a name="l00354"></a>00354             <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; DIMENSION; ++i)
<a name="l00355"></a>00355                 end_[i] = RangePolicy::pointEnd(p[i]);
<a name="l00356"></a>00356         }
<a name="l00357"></a>00357         <span class="keywordflow">else</span>
<a name="l00358"></a>00358         {
<a name="l00359"></a>00359             <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; DIMENSION; ++i)
<a name="l00360"></a>00360             {
<a name="l00361"></a>00361                 <span class="keywordflow">if</span>(p[i] &lt; begin_[i])
<a name="l00362"></a>00362                     begin_[i] = p[i];
<a name="l00363"></a>00363                 <span class="keywordflow">if</span>(RangePolicy::isEmptyRange(p[i], end_[i]))
<a name="l00364"></a>00364                     end_[i] = RangePolicy::pointEnd(p[i]);
<a name="l00365"></a>00365             }
<a name="l00366"></a>00366         }
<a name="l00367"></a>00367         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00368"></a>00368     }
<a name="l00369"></a>00369 <span class="comment"></span>
<a name="l00370"></a>00370 <span class="comment">        /** Returns the union of this box and the given point.</span>
<a name="l00371"></a>00371 <span class="comment">         * The result will be the bounding box of the box and the</span>
<a name="l00372"></a>00372 <span class="comment">         * point.  If isEmpty() returns true on the original box, the</span>
<a name="l00373"></a>00373 <span class="comment">         * union will be a box containing only the given point.</span>
<a name="l00374"></a>00374 <span class="comment">         */</span>
<a name="l00375"></a><a class="code" href="classvigra_1_1Box.html#a6b2b5d92bafa9ed4c0aa47d0dc57ee04">00375</a>     <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> <a class="code" href="classvigra_1_1Box.html#a6b2b5d92bafa9ed4c0aa47d0dc57ee04">operator|</a>(<a class="code" href="classvigra_1_1TinyVector.html">Vector</a> <span class="keyword">const</span> &amp;p)<span class="keyword"> const</span>
<a name="l00376"></a>00376 <span class="keyword">    </span>{
<a name="l00377"></a>00377         <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> result(*<span class="keyword">this</span>);
<a name="l00378"></a>00378         result |= p;
<a name="l00379"></a>00379         <span class="keywordflow">return</span> result;
<a name="l00380"></a>00380     }
<a name="l00381"></a>00381 <span class="comment"></span>
<a name="l00382"></a>00382 <span class="comment">        /** Modifies this box by uniting it with the given one.</span>
<a name="l00383"></a>00383 <span class="comment">         * The result will be the bounding box of both boxs. If one of</span>
<a name="l00384"></a>00384 <span class="comment">         * the boxes isEmpty(), the union will be the other one.</span>
<a name="l00385"></a>00385 <span class="comment">         */</span>
<a name="l00386"></a><a class="code" href="classvigra_1_1Box.html#a0dd90ec98c41cfb700b547598d9da070">00386</a>     <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> &amp;<a class="code" href="classvigra_1_1Box.html#a056e8550c09d2534db6faca78ea923d1">operator|=</a>(<a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> <span class="keyword">const</span> &amp;r)
<a name="l00387"></a>00387     {
<a name="l00388"></a>00388         <span class="keywordflow">if</span>(r.<a class="code" href="classvigra_1_1Box.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>())
<a name="l00389"></a>00389             <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00390"></a>00390         <span class="keywordflow">if</span>(<a class="code" href="classvigra_1_1Box.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>())
<a name="l00391"></a>00391             <span class="keywordflow">return</span> this-&gt;<span class="keyword">operator</span>=(r);
<a name="l00392"></a>00392 
<a name="l00393"></a>00393         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; DIMENSION; ++i)
<a name="l00394"></a>00394         {
<a name="l00395"></a>00395             <span class="keywordflow">if</span>(r.begin_[i] &lt; begin_[i])
<a name="l00396"></a>00396                 begin_[i] = r.begin_[i];
<a name="l00397"></a>00397             <span class="keywordflow">if</span>(end_[i] &lt; r.end_[i])
<a name="l00398"></a>00398                 end_[i] = r.end_[i];
<a name="l00399"></a>00399         }
<a name="l00400"></a>00400         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00401"></a>00401     }
<a name="l00402"></a>00402 <span class="comment"></span>
<a name="l00403"></a>00403 <span class="comment">        /** Returns the union of this box and the given one.</span>
<a name="l00404"></a>00404 <span class="comment">         * The result will be the bounding box of both boxs. If one of</span>
<a name="l00405"></a>00405 <span class="comment">         * the boxes isEmpty(), the union will be the other one.</span>
<a name="l00406"></a>00406 <span class="comment">         */</span>
<a name="l00407"></a><a class="code" href="classvigra_1_1Box.html#a4f1c8779fcec2feb6bca2311ca7d0577">00407</a>     <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> <a class="code" href="classvigra_1_1Box.html#a6b2b5d92bafa9ed4c0aa47d0dc57ee04">operator|</a>(<a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> <span class="keyword">const</span> &amp;r)<span class="keyword"> const</span>
<a name="l00408"></a>00408 <span class="keyword">    </span>{
<a name="l00409"></a>00409         <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> result(*<span class="keyword">this</span>);
<a name="l00410"></a>00410         result |= r;
<a name="l00411"></a>00411         <span class="keywordflow">return</span> result;
<a name="l00412"></a>00412     }
<a name="l00413"></a>00413 <span class="comment"></span>
<a name="l00414"></a>00414 <span class="comment">        /** Modifies this box by intersecting it with the given one.</span>
<a name="l00415"></a>00415 <span class="comment">         * The result will be the maximal box contained in both</span>
<a name="l00416"></a>00416 <span class="comment">         * original ones. Intersecting with an empty box will yield</span>
<a name="l00417"></a>00417 <span class="comment">         * again an empty box.</span>
<a name="l00418"></a>00418 <span class="comment">         */</span>
<a name="l00419"></a><a class="code" href="classvigra_1_1Box.html#afa276aeac622f442089a1a763d8f1c23">00419</a>     <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> &amp;<a class="code" href="classvigra_1_1Box.html#afa276aeac622f442089a1a763d8f1c23">operator&amp;=</a>(<a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> <span class="keyword">const</span> &amp;r)
<a name="l00420"></a>00420     {
<a name="l00421"></a>00421         <span class="keywordflow">if</span>(<a class="code" href="classvigra_1_1Box.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>())
<a name="l00422"></a>00422             <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00423"></a>00423         <span class="keywordflow">if</span>(r.<a class="code" href="classvigra_1_1Box.html#a479432127ee77145cc19d6a2d1590821">isEmpty</a>())
<a name="l00424"></a>00424             <span class="keywordflow">return</span> this-&gt;<span class="keyword">operator</span>=(r);
<a name="l00425"></a>00425 
<a name="l00426"></a>00426         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; DIMENSION; ++i)
<a name="l00427"></a>00427         {
<a name="l00428"></a>00428             <span class="keywordflow">if</span>(begin_[i] &lt; r.begin_[i])
<a name="l00429"></a>00429                 begin_[i] = r.begin_[i];
<a name="l00430"></a>00430             <span class="keywordflow">if</span>(r.end_[i] &lt; end_[i])
<a name="l00431"></a>00431                 end_[i] = r.end_[i];
<a name="l00432"></a>00432         }
<a name="l00433"></a>00433         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00434"></a>00434     }
<a name="l00435"></a>00435 <span class="comment"></span>
<a name="l00436"></a>00436 <span class="comment">        /** Intersects this box with the given one.</span>
<a name="l00437"></a>00437 <span class="comment">         * The result will be the maximal box contained in both</span>
<a name="l00438"></a>00438 <span class="comment">         * original ones.  Intersecting with an empty box will yield</span>
<a name="l00439"></a>00439 <span class="comment">         * again an empty box.</span>
<a name="l00440"></a>00440 <span class="comment">         */</span>
<a name="l00441"></a><a class="code" href="classvigra_1_1Box.html#aea0abdf03177a7e2fa535c9e14b12196">00441</a>     <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> <a class="code" href="classvigra_1_1Box.html#aea0abdf03177a7e2fa535c9e14b12196">operator&amp;</a>(<a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> <span class="keyword">const</span> &amp;r)<span class="keyword"> const</span>
<a name="l00442"></a>00442 <span class="keyword">    </span>{
<a name="l00443"></a>00443         <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> result(*<span class="keyword">this</span>);
<a name="l00444"></a>00444         result &amp;= r;
<a name="l00445"></a>00445         <span class="keywordflow">return</span> result;
<a name="l00446"></a>00446     }
<a name="l00447"></a>00447 <span class="comment"></span>
<a name="l00448"></a>00448 <span class="comment">        /**</span>
<a name="l00449"></a>00449 <span class="comment">         * Scale box by scalar multiply-assignment.  The same scalar</span>
<a name="l00450"></a>00450 <span class="comment">         * multiply-assignment operation will be performed on both</span>
<a name="l00451"></a>00451 <span class="comment">         * begin() and end().</span>
<a name="l00452"></a>00452 <span class="comment">         */</span>
<a name="l00453"></a><a class="code" href="classvigra_1_1Box.html#ac252bdaec833df08dcffe2c0ad8abb57">00453</a>     <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> &amp;<a class="code" href="classvigra_1_1Box.html#ac252bdaec833df08dcffe2c0ad8abb57">operator*=</a>(<span class="keywordtype">double</span> scale)
<a name="l00454"></a>00454     {
<a name="l00455"></a>00455         begin_ *= scale;
<a name="l00456"></a>00456         end_   *= scale;
<a name="l00457"></a>00457         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00458"></a>00458     }
<a name="l00459"></a>00459 <span class="comment"></span>
<a name="l00460"></a>00460 <span class="comment">        /**</span>
<a name="l00461"></a>00461 <span class="comment">         * Return box scaled by given factor.  The same scalar</span>
<a name="l00462"></a>00462 <span class="comment">         * multiplication will be performed on both begin() and end().</span>
<a name="l00463"></a>00463 <span class="comment">         */</span>
<a name="l00464"></a><a class="code" href="classvigra_1_1Box.html#a504f20ec4520e48eeb88677ba543f724">00464</a>     <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> <a class="code" href="classvigra_1_1Box.html#a504f20ec4520e48eeb88677ba543f724">operator*</a>(<span class="keywordtype">double</span> scale)
<a name="l00465"></a>00465     {
<a name="l00466"></a>00466         <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> result(*<span class="keyword">this</span>);
<a name="l00467"></a>00467         result *= scale;
<a name="l00468"></a>00468         <span class="keywordflow">return</span> result;
<a name="l00469"></a>00469     }
<a name="l00470"></a>00470 <span class="comment"></span>
<a name="l00471"></a>00471 <span class="comment">        /**</span>
<a name="l00472"></a>00472 <span class="comment">         * Scale box by scalar divide-assignment.  The same scalar</span>
<a name="l00473"></a>00473 <span class="comment">         * divide-assignment operation will be performed on both</span>
<a name="l00474"></a>00474 <span class="comment">         * begin() and end().</span>
<a name="l00475"></a>00475 <span class="comment">         */</span>
<a name="l00476"></a><a class="code" href="classvigra_1_1Box.html#aed9b24303f4c51630eb1c122e26118c8">00476</a>     <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> &amp;<a class="code" href="classvigra_1_1Box.html#aed9b24303f4c51630eb1c122e26118c8">operator/=</a>(<span class="keywordtype">double</span> scale)
<a name="l00477"></a>00477     {
<a name="l00478"></a>00478         begin_ /= scale;
<a name="l00479"></a>00479         end_   /= scale;
<a name="l00480"></a>00480         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00481"></a>00481     }
<a name="l00482"></a>00482 <span class="comment"></span>
<a name="l00483"></a>00483 <span class="comment">        /**</span>
<a name="l00484"></a>00484 <span class="comment">         * Return box scaled by inverse of given factor.  The same scalar</span>
<a name="l00485"></a>00485 <span class="comment">         * division will be performed on both begin() and end().</span>
<a name="l00486"></a>00486 <span class="comment">         */</span>
<a name="l00487"></a><a class="code" href="classvigra_1_1Box.html#a3c3238626521c8ae7d75d3ff32dc3698">00487</a>     <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> <a class="code" href="classvigra_1_1Box.html#a3c3238626521c8ae7d75d3ff32dc3698">operator/</a>(<span class="keywordtype">double</span> scale)
<a name="l00488"></a>00488     {
<a name="l00489"></a>00489         <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> result(*<span class="keyword">this</span>);
<a name="l00490"></a>00490         result /= scale;
<a name="l00491"></a>00491         <span class="keywordflow">return</span> result;
<a name="l00492"></a>00492     }
<a name="l00493"></a>00493 <span class="comment"></span>
<a name="l00494"></a>00494 <span class="comment">        /**</span>
<a name="l00495"></a>00495 <span class="comment">         * Translate box by vector addition-assignment.  The same vector</span>
<a name="l00496"></a>00496 <span class="comment">         * addition-assignment operation will be performed on both</span>
<a name="l00497"></a>00497 <span class="comment">         * begin() and end().</span>
<a name="l00498"></a>00498 <span class="comment">         */</span>
<a name="l00499"></a><a class="code" href="classvigra_1_1Box.html#ab5fb79d7ed93aa59f5407e8c589d4110">00499</a>     <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> &amp;<a class="code" href="classvigra_1_1Box.html#ab5fb79d7ed93aa59f5407e8c589d4110">operator+=</a>(<span class="keyword">const</span> <a class="code" href="classvigra_1_1TinyVector.html">Vector</a> &amp;offset)
<a name="l00500"></a>00500     {
<a name="l00501"></a>00501         begin_ += offset;
<a name="l00502"></a>00502         end_   += offset;
<a name="l00503"></a>00503         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00504"></a>00504     }
<a name="l00505"></a>00505 <span class="comment"></span>
<a name="l00506"></a>00506 <span class="comment">        /**</span>
<a name="l00507"></a>00507 <span class="comment">         * Translate box by vector addition.  The same vector addition</span>
<a name="l00508"></a>00508 <span class="comment">         * operation will be performed on both begin() and end().</span>
<a name="l00509"></a>00509 <span class="comment">         */</span>
<a name="l00510"></a><a class="code" href="classvigra_1_1Box.html#a2e1cf44e9cc352a1d0569d599fcd3959">00510</a>     <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> <a class="code" href="classvigra_1_1Box.html#a2e1cf44e9cc352a1d0569d599fcd3959">operator+</a>(<span class="keyword">const</span> <a class="code" href="classvigra_1_1TinyVector.html">Vector</a> &amp;offset)
<a name="l00511"></a>00511     {
<a name="l00512"></a>00512         <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> result(*<span class="keyword">this</span>);
<a name="l00513"></a>00513         result += offset;
<a name="l00514"></a>00514         <span class="keywordflow">return</span> result;
<a name="l00515"></a>00515     }
<a name="l00516"></a>00516 <span class="comment"></span>
<a name="l00517"></a>00517 <span class="comment">        /**</span>
<a name="l00518"></a>00518 <span class="comment">         * Translate box by vector subtract-assignment.  The same vector</span>
<a name="l00519"></a>00519 <span class="comment">         * subtract-assignment operation will be performed on both</span>
<a name="l00520"></a>00520 <span class="comment">         * begin() and end().</span>
<a name="l00521"></a>00521 <span class="comment">         */</span>
<a name="l00522"></a><a class="code" href="classvigra_1_1Box.html#a354eb46e82c15f11f84c3385d08bf203">00522</a>     <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> &amp;<a class="code" href="classvigra_1_1Box.html#a354eb46e82c15f11f84c3385d08bf203">operator-=</a>(<span class="keyword">const</span> <a class="code" href="classvigra_1_1TinyVector.html">Vector</a> &amp;offset)
<a name="l00523"></a>00523     {
<a name="l00524"></a>00524         begin_ -= offset;
<a name="l00525"></a>00525         end_   -= offset;
<a name="l00526"></a>00526         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00527"></a>00527     }
<a name="l00528"></a>00528 <span class="comment"></span>
<a name="l00529"></a>00529 <span class="comment">        /**</span>
<a name="l00530"></a>00530 <span class="comment">         * Translate box by vector subtract.  The same vector subtract</span>
<a name="l00531"></a>00531 <span class="comment">         * operation will be performed on both begin() and end().</span>
<a name="l00532"></a>00532 <span class="comment">         */</span>
<a name="l00533"></a><a class="code" href="classvigra_1_1Box.html#a4188aaf5ec750c8b162ae44f55432d6c">00533</a>     <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> <a class="code" href="classvigra_1_1Box.html#a4188aaf5ec750c8b162ae44f55432d6c">operator-</a>(<span class="keyword">const</span> <a class="code" href="classvigra_1_1TinyVector.html">Vector</a> &amp;offset)
<a name="l00534"></a>00534     {
<a name="l00535"></a>00535         <a class="code" href="classvigra_1_1Box.html" title="Represent an n-dimensional box as a (begin, end) pair. Depending on the value type, end() is considered to be outside the box (as in the STL, for integer types), or inside (for floating point types). size() will always be end() - begin().">Box</a> result(*<span class="keyword">this</span>);
<a name="l00536"></a>00536         result -= offset;
<a name="l00537"></a>00537         <span class="keywordflow">return</span> result;
<a name="l00538"></a>00538     }
<a name="l00539"></a>00539 };
<a name="l00540"></a>00540 <span class="comment"></span>
<a name="l00541"></a>00541 <span class="comment">//@}</span>
<a name="l00542"></a>00542 <span class="comment"></span>
<a name="l00543"></a>00543 } <span class="comment">// namespace vigra</span>
<a name="l00544"></a>00544 
<a name="l00545"></a>00545 <span class="preprocessor">#endif // VIGRA_BOX_HXX</span>
</pre></div></div><!-- contents -->
<!-- footer.html -->
<p>
<table border=0 cellspacing=0 width="100%"  bgcolor="#e0d0a0" cellpadding=5>
<tr>
<td>
<p>
<i>&copy; <A HREF="http://hci.iwr.uni-heidelberg.de/people/ukoethe/">Ullrich K&ouml;the</A>     (<A
HREF="mailto:ullrich.koethe@iwr.uni-heidelberg.de">ullrich.koethe@iwr.uni-heidelberg.de</A>)</i> <br>
<i><A HREF="http://hci.iwr.uni-heidelberg.de/">
Heidelberg Collaboratory for Image Processing</a>,
University of Heidelberg, Germany</i>
<td>
<p align=right>
<I>html generated using <A HREF="http://www.doxygen.org">doxygen</A> and <A HREF="http://www.python.org">Python</A></I>
<br>
<i>
vigra 1.9.1 (Thu Sep 5 2013)
</i>
</tr>
</table>


</BODY>
</HTML>
