IF(JPEG_FOUND)
  ADD_DEFINITIONS(-DHasJPEG)
ENDIF(JPEG_FOUND)

IF(PNG_FOUND)
  ADD_DEFINITIONS(-DHasPNG)
ENDIF(PNG_FOUND)

IF(TIFF_FOUND)
  ADD_DEFINITIONS(-DHasTIFF)
ENDIF(TIFF_FOUND)

VIGRA_ADD_TEST(test_multiarray test.cxx LIBRARIES vigraimpex)

FILE(MAKE_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/impex)

if(NOT MSVC)
    IF (CMAKE_COMPILER_IS_GNUCXX AND CMAKE_CXX_COMPILER_VERSION VERSION_LESS "4.7.0")
        SET(CMAKE_CXX_FLAGS "-pthread -std=c++0x ${CMAKE_CXX_FLAGS}")
    else()
        SET(CMAKE_CXX_FLAGS "-pthread -std=c++11 ${CMAKE_CXX_FLAGS}")
    endif()
endif()

if(APPLE)
    SET(CMAKE_CXX_FLAGS "-stdlib=libc++ ${CMAKE_CXX_FLAGS}")
endif()

SET(SNAPPY_LIBRARIES "c:/install/lib/snappy.lib")
INCLUDE_DIRECTORIES(${ZLIB_INCLUDE_DIR} ${HDF5_INCLUDE_DIR} ${SNAPPY_INCLUDE_DIR})
VIGRA_ADD_TEST(test_multiarray_chunked test_chunked.cxx minilzo.c
               LIBRARIES vigraimpex ${SNAPPY_LIBRARIES} ${ZLIB_LIBRARIES} ${HDF5_CORE_LIBRARY} ${HDF5_HL_LIBRARY})
