MAJOR_VERSION = @MAJOR_VERSION@
MINOR_VERSION = @MINOR_VERSION@
MICRO_VERSION = @MICRO_VERSION@
VIGRA_VERSION = @MAJOR_VERSION@.@MINOR_VERSION@.@MICRO_VERSION@

vigra_builddir = @vigra_builddir@
vigra_srcdir = @vigra_srcdir@
prefix = @prefix@
exec_prefix = @exec_prefix@
includedir = @includedir@
libdir = @libdir@
bindir = @bindir@
docdir = @datadir@/doc/vigra

CC = @CC@
CFLAGS := @CFLAGS@
LIBCFLAGS := @LIBCFLAGS@
CINCLUDES := @CINCLUDES@

CXX = @CXX@
CXXFLAGS := @CXXFLAGS@
LIBCXXFLAGS := @LIBCXXFLAGS@
CXXINCLUDES := @CXXINCLUDES@

LD = @LD@
LIBS = @LIBS@
JPEG_LIB = @JPEG_LIB@
TIFF_LIB = @TIFF_LIB@
IMPEX_DEPLIBS = @IMPEX_DEPLIBS@
IMPEX_LIB = @IMPEX_LIB@
FFTW_LIB = @FFTW_LIB@
VIGRA_INCLUDES = @VIGRA_INCLUDES@
FFTW_INCLUDES = @FFTW_INCLUDES@

LIBTOOL = ${vigra_builddir}/libtool
LIBCC = $(LIBTOOL) --mode=compile $(CC)
LIBCXX = $(LIBTOOL) --tag=CXX --mode=compile $(CXX)
LINKCLIB = $(LIBTOOL) --mode=link $(CC) -rpath $(libdir)
LINKCXXLIB = $(LIBTOOL) --mode=link $(CXX) -rpath $(libdir)
LINKC = $(LIBTOOL) --mode=link $(CC)
LINKCXX = $(LIBTOOL) --tag=CXX --mode=link $(CXX)
LIBINSTALL = $(LIBTOOL) --mode=install @INSTALL@
INSTALL = @INSTALL@

%.o: %.c
	$(CC) $(CFLAGS) $(CINCLUDES) -c $*.c

%.o: %.cxx
	$(CXX) $(CXXFLAGS) $(CXXINCLUDES) -c $*.cxx

%.lo: %.c
	$(LIBCC) $(CFLAGS) $(LIBCFLAGS) $(CINCLUDES) -c $*.c

%.lo: %.cxx
	$(LIBCXX) $(CXXFLAGS) $(LIBCXXFLAGS) $(CXXINCLUDES) -c $*.cxx

%.d: %.c
	@echo updating header dependencies for $*.c
	@rm -f $*.d
	@(echo -e "$*.d \c" ; $(CC) -M $(CFLAGS) $(CINCLUDES) -c $*.c) > $*.d \
        || { rm -f $*.d; exit 1; }

%.d: %.cxx
	@echo updating header dependencies for $*.cxx
	@rm -f $*.d
	@(echo -e "$*.d \c" ; $(CXX) -M $(CXXFLAGS) $(CXXINCLUDES) -c $*.cxx) > $*.d \
        || { rm -f $*.d; exit 1; }
