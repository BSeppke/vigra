#!/bin/sh

prefix="@prefix@"
exec_prefix="@exec_prefix@"

usage()
{
  if test -z '@FFTW_LIB@'; then
    fftwstatus=" (not configured)"
    fftwflags=" (fftw not configured)"
  else
    fftwflags=" and fftw"
  fi

  cat <<EOF
Usage: $0 [OPTIONS]
Options:
    [--version]    output version ("@MAJOR_VERSION@.@MINOR_VERSION@.@MICRO_VERSION@")
    [--target]     output platform this vigra version was configured for
    [--impex_lib]  output flags for linking libvigraimpex
    [--fftw_lib]   output flags for linking libfftw$fftwstatus
    [--cxxflags]   output include flags for vigra$fftwflags
   ([--libs]       synonym for --impex_lib)
EOF
    exit $1
}

if test $# -eq 0; then
    usage 1 1>&2
fi

while test $# -gt 0; do
  case $1 in
    --version)
      echo @MAJOR_VERSION@.@MINOR_VERSION@.@MICRO_VERSION@
      ;;
    --target|--platform)
      echo @target@
      ;;
    --cxxflags)
      echo '@CXXINCLUDES@' \
        | sed "s,\$[({]prefix[})],@prefix@,"
      ;;
    --impex_lib|--libs)
      echo '@IMPEX_LIB@' \
        | sed "s,\$[({]exec_prefix[})],@exec_prefix@," \
        | sed "s,\$[({]prefix[})],@prefix@,"
      ;;
    --fftw_lib)
      if test -z '@FFTW_LIB@'; then
        echo "VIGRA was configured without fftw switches, libpath unknown!" 1>&2
      else
        echo '@FFTW_LIB@' \
          | sed "s,\$[({]exec_prefix[})],@exec_prefix@," \
          | sed "s,\$[({]prefix[})],@prefix@,"
      fi
      ;;
    *)
      usage 1 1>&2
      ;;
  esac
  shift
done
